---
apiVersion: v1
kind: Namespace
metadata:
  name: {{ ENV.NS }}

---
apiVersion: v1
kind: PersistentVolume
metadata:
  name: {{ ENV.NS }}-nfs-media
spec:
  capacity:
    storage: 12Ti
  accessModes:
    - ReadWriteMany
  nfs:
    server: 192.168.42.24
    path: /
  mountOptions: [nfsvers=4.2]

---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: nfs-media
  namespace: {{ ENV.NS }}
spec:
  resources:
    requests:
      storage: 12Ti
  accessModes:
    - ReadWriteMany
  storageClassName: ''
  volumeName: {{ ENV.NS }}-nfs-media

---
apiVersion: snapscheduler.backube/v1
kind: SnapshotSchedule
metadata:
  name: hourly
  namespace: {{ ENV.NS }}
spec:
  claimSelector:
    matchLabels:
      schedule/hourly: enabled
  retention:
    expires: 24h
  schedule: '@hourly'

---
apiVersion: snapscheduler.backube/v1
kind: SnapshotSchedule
metadata:
  name: daily
  namespace: {{ ENV.NS }}
spec:
  claimSelector:
    matchLabels:
      schedule/daily: enabled
  retention:
    expires: 168h
  schedule: '@daily'
