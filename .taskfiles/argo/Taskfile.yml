# yaml-language-server: $schema=https://taskfile.dev/schema.json
---
version: '3'

tasks:
  refresh-app:
    requires:
      vars: [appname]
    cmd: >
      kubectl annotate -n argocd
      application {{.appname}}
      argocd.argoproj.io/refresh='normal'

  refresh-all:
    cmd: >
      kubectl get applications -n argocd -o name | xargs -I % kubectl annotate -n argocd % argocd.argoproj.io/refresh='normal'
