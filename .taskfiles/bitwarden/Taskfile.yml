# yaml-language-server: $schema=https://taskfile.dev/schema.json
---
version: '3'

vars:
  PROJECT_ID: 3ab9d88d-d65b-4ad9-9486-b31700fe6f11

tasks:
  bws:
    requires:
      vars: [ARGS]
    cmd: >
      podman run --rm -it
      --env BWS_ACCESS_TOKEN
      docker.io/bitwarden/bws {{.ARGS}}

  create-secret:
    requires:
      vars: [KEY, VALUE, PROJECT_ID]
    cmd:
      task: bws
      vars:
        ARGS: >
          secret create
          '{{.KEY}}'
          '{{.VALUE}}'
          '{{.PROJECT_ID}}'
