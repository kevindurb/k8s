# yaml-language-server: $schema=https://taskfile.dev/schema.json
---
version: '3'

dotenv: [.env]

vars:
  servers:
    - hostname: unimatrix-01
      ip: 192.168.42.11
      interface: enp1s0f0
    - hostname: unimatrix-02
      ip: 192.168.42.12
      interface: enp1s0f0
    - hostname: unimatrix-03
      ip: 192.168.42.13
      interface: enp1s0f0
  agents:
    - hostname: drone-01
      ip: 192.168.42.21
      interface: enp0s25
    - hostname: drone-02
      ip: 192.168.42.22
      interface: enp0s25
    - hostname: drone-03
      ip: 192.168.42.23
      interface: enp0s25
    - hostname: drone-04
      ip: 192.168.42.24
      interface: enp5s0

includes:
  templates:
    taskfile: .taskfiles/templates
    aliases: [t, tmp, gen]
  argo:
    taskfile: .taskfiles/argo
  bootc:
    taskfile: .taskfiles/bootc
  cloudflare:
    taskfile: .taskfiles/cloudflare
  kubernetes:
    taskfile: .taskfiles/kubernetes
    aliases: [k, k8s]
  bitwarden:
    aliases: [bws]
    taskfile: .taskfiles/bitwarden
  zfs:
    taskfile: .taskfiles/zfs
  nodes:
    taskfile: .taskfiles/nodes

tasks:
  default: task --list-all
  lint: npx prettier -w .
  get-kubeconfig: ssh core@192.168.42.1 'sudo cat /etc/rancher/k3s/k3s.yaml' > kubeconfig
