---
apiVersion: k8s.bitwarden.com/v1
kind: BitwardenSecret
metadata:
  name: pihole-secret
  annotations:
    argocd.argoproj.io/sync-options: Replace=true
spec:
  organizationId: 575f69b2-49f4-456d-bd6f-b14101103188
  secretName: external-dns-pihole-secret
  map:
    - secretKeyName: PIHOLE_WEBPASSWORD
      bwSecretId: 4064bfb3-c15b-4ba1-b0c5-b34f00ea2db3
  authToken:
    secretName: bw-auth-token
    secretKey: token

---
apiVersion: externaldns.k8s.io/v1alpha1
kind: DNSEndpoint
metadata:
  name: pihole-external-endpoint
spec:
  endpoints:
    - dnsName: external.beaver-cloud.xyz
      recordType: A
      targets: [192.168.42.11]

---
apiVersion: externaldns.k8s.io/v1alpha1
kind: DNSEndpoint
metadata:
  name: pihole-internal-endpoint
spec:
  endpoints:
    - dnsName: internal.beaver-cloud.xyz
      recordType: A
      targets: [192.168.42.12]
